<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NewsAtlas | Global Intelligence Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/3.0.2/topojson.min.js"></script>
    <script src="//unpkg.com/three"></script>
    <script src="//unpkg.com/globe.gl"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Syne:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />

    <meta
      name="description"
      content="NewsAtlas: Real-time Global Intelligence Terminal."
    />
    <meta name="theme-color" content="#020617" />
    <link
      rel="icon"
      href="https://cdn-icons-png.flaticon.com/512/2072/2072130.png"
      type="image/x-icon"
    />

    <style>
      :root {
        --blue: #3b82f6;
        --cyan: #06b6d4;
        --emerald: #10b981;
        --red: #ef4444;
        --amber: #f59e0b;
        --bg: #020617;
        --glass: rgba(5, 15, 40, 0.93);
        --border: rgba(59, 130, 246, 0.11);
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Syne", "Segoe UI", sans-serif;
        font-size: 16.5px;
        background-color: var(--bg);
        background-image:
          radial-gradient(
            ellipse at 0% 0%,
            rgba(59, 130, 246, 0.09) 0,
            transparent 55%
          ),
          radial-gradient(
            ellipse at 100% 100%,
            rgba(6, 182, 212, 0.05) 0,
            transparent 55%
          ),
          linear-gradient(rgba(59, 130, 246, 0.03) 1px, transparent 1px),
          linear-gradient(90deg, rgba(59, 130, 246, 0.03) 1px, transparent 1px);
        background-size:
          auto,
          auto,
          48px 48px,
          48px 48px;
        color: #e2e8f0;
        overflow-x: hidden;
        overflow-y: auto;
        width: 100vw;
        cursor: crosshair;
      }

      body::before {
        content: "";
        position: fixed;
        inset: 0;
        z-index: 9999;
        pointer-events: none;
        background: repeating-linear-gradient(
          0deg,
          transparent,
          transparent 2px,
          rgba(0, 0, 0, 0.09) 2px,
          rgba(0, 0, 0, 0.09) 4px
        );
        opacity: 0.55;
      }

      body::after {
        content: "";
        position: fixed;
        inset: 0;
        z-index: 9998;
        pointer-events: none;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E");
        opacity: 0.32;
      }

      .glass-panel {
        background: var(--glass);
        backdrop-filter: blur(32px);
        -webkit-backdrop-filter: blur(32px);
        border: 1px solid var(--border);
        border-radius: 1rem;
        box-shadow:
          0 0 0 1px rgba(59, 130, 246, 0.04),
          0 20px 60px rgba(0, 0, 0, 0.6),
          inset 0 1px 0 rgba(255, 255, 255, 0.04);
      }

      header {
        height: 100px;
        padding: 0 1.5rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-shrink: 0;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 50;
        background: rgba(2, 6, 23, 0.97);
        border-bottom: 1px solid rgba(59, 130, 246, 0.1);
        box-shadow: 0 1px 40px rgba(0, 0, 0, 0.6);
        max-width: 100%;
      }

      header > * {
        flex-shrink: 0;
      }

      .main-content {
        margin-top: 100px;
        padding: 1.25rem;
        gap: 1.25rem;
        display: flex;
        flex-direction: column;
        width: 100%;
      }

      .map-box {
        position: relative;
        width: 100%;
        height: 82vh;
        min-height: 520px;
        overflow: hidden;
        background: rgba(2, 6, 23, 0.7);
        border: 1px solid rgba(59, 130, 246, 0.14);
        border-radius: 1rem;
        display: flex;
        flex-direction: column;
        transition: background 0.5s ease;
        box-shadow:
          0 0 0 1px rgba(59, 130, 246, 0.04),
          0 0 60px rgba(59, 130, 246, 0.04);
      }

      .map-interaction-overlay {
        position: absolute;
        inset: 0;
        z-index: 20;
        background: rgba(2, 6, 23, 0.28);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.4s ease;
        cursor: pointer;
        backdrop-filter: blur(1px);
      }

      .map-interaction-overlay.active {
        opacity: 0;
        pointer-events: none;
      }

      @keyframes mapscan {
        0% {
          top: -2px;
        }

        100% {
          top: 100%;
        }
      }

      .map-scan-line {
        position: absolute;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(6, 182, 212, 0.35),
          transparent
        );
        animation: mapscan 5s linear infinite;
        pointer-events: none;
        z-index: 5;
      }

      .intel-sidebar {
        width: 100%;
        display: flex;
        flex-direction: column;
        overflow: visible;
        flex-shrink: 0;
        min-height: 100vh;
      }

      .country {
        stroke: #020617;
        stroke-width: 0.4;
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
      }

      .country:hover {
        fill: #1e3a5f;
        filter: drop-shadow(0 0 8px rgba(59, 130, 246, 0.5));
      }

      .country.active {
        fill: var(--blue);
        stroke: rgba(255, 255, 255, 0.6);
        stroke-width: 1.5;
        filter: drop-shadow(0 0 25px rgba(59, 130, 246, 0.7));
      }

      .dossier-card {
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: 12px;
        padding: 1.25rem;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        display: flex;
        flex-direction: column;
      }

      .dossier-card:hover {
        background: rgba(59, 130, 246, 0.04);
        border-color: rgba(59, 130, 246, 0.25);
        transform: translateY(-1px);
        box-shadow: 0 0 20px rgba(59, 130, 246, 0.07);
      }

      .nav-tab {
        transition: all 0.25s ease;
        background: transparent;
        border-bottom: 2px solid transparent;
        cursor: pointer;
        font-family: "JetBrains Mono", monospace;
        font-size: 15px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        flex: 1 1 0;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1.1rem 0;
        color: rgba(100, 116, 139, 0.7);
      }

      .nav-tab:hover {
        color: #e2e8f0;
        background: rgba(59, 130, 246, 0.06);
      }

      .nav-tab.active {
        color: var(--blue);
        border-bottom-color: var(--blue);
        background: rgba(59, 130, 246, 0.05);
        text-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
      }

      .intel-tab {
        cursor: pointer;
        font-family: "JetBrains Mono", monospace;
        font-size: 10px;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        color: rgba(100, 116, 139, 0.7);
        padding: 0.6rem 0;
        margin-right: 1.5rem;
        transition: all 0.25s ease;
        white-space: nowrap;
        position: relative;
      }

      .intel-tab:hover {
        color: #e2e8f0;
      }

      .intel-tab.active {
        color: var(--blue);
      }

      .intel-tab.active::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 1.5px;
        background: var(--blue);
        box-shadow: 0 0 8px var(--blue);
      }

      .tab-content {
        display: none;
        height: 100%;
        flex-direction: column;
        overflow: visible;
      }

      .tab-content.active {
        display: flex;
      }

      .content-scroll-area {
        flex: 1;
        overflow-y: visible;
        padding: 1.25rem;
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      #articles-container {
        display: grid;
        grid-template-columns: repeat(1, 1fr);
        gap: 1rem;
      }

      @media (min-width: 768px) {
        #articles-container {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (min-width: 1024px) {
        #articles-container {
          grid-template-columns: repeat(3, 1fr);
        }
      }

      .ticker-wrap {
        width: 100%;
        overflow: hidden;
        white-space: nowrap;
      }

      .ticker {
        display: inline-block;
        padding-left: 100%;
        animation: ticker-anim 45s linear infinite;
      }

      .ticker-item {
        display: inline-block;
        padding: 0 1rem;
        font-size: 11px;
        font-family: "JetBrains Mono", monospace;
        font-weight: 600;
        letter-spacing: 0.02em;
      }

      @keyframes ticker-anim {
        0% {
          transform: translate3d(0, 0, 0);
        }

        100% {
          transform: translate3d(-100%, 0, 0);
        }
      }

      .skeleton {
        background: linear-gradient(
          90deg,
          rgba(255, 255, 255, 0.02) 25%,
          rgba(255, 255, 255, 0.05) 50%,
          rgba(255, 255, 255, 0.02) 75%
        );
        background-size: 200% 100%;
        animation: skel 1.5s infinite linear;
      }

      @keyframes skel {
        0% {
          background-position: 200% 0;
        }

        100% {
          background-position: -200% 0;
        }
      }

      .animate-marquee {
        display: inline-block;
        animation: marquee 50s linear infinite;
      }

      @keyframes marquee {
        0% {
          transform: translateX(0);
        }

        100% {
          transform: translateX(-50%);
        }
      }

      ::-webkit-scrollbar {
        width: 3px;
      }

      ::-webkit-scrollbar-thumb {
        background: rgba(59, 130, 246, 0.3);
        border-radius: 10px;
      }

      ::-webkit-scrollbar-track {
        background: transparent;
      }

      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }

      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }

      #search-overlay,
      #about-overlay {
        background: rgba(2, 6, 23, 0.98);
        backdrop-filter: blur(24px);
        z-index: 1000;
      }

      .tactical-btn {
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .tactical-btn:hover {
        transform: scale(1.08);
        filter: drop-shadow(0 0 8px rgba(59, 130, 246, 0.55));
      }

      .signal-blue {
        border-left: 3px solid var(--blue);
      }

      .signal-emerald {
        border-left: 3px solid var(--emerald);
      }

      .signal-red {
        border-left: 3px solid var(--red);
      }

      .skill-tag {
        background: rgba(59, 130, 246, 0.1);
        border: 1px solid rgba(59, 130, 246, 0.25);
        color: #60a5fa;
        font-size: 10px;
        font-weight: 900;
        font-family: "JetBrains Mono", monospace;
        padding: 5px 12px;
        border-radius: 6px;
        text-transform: uppercase;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .skill-dot {
        width: 5px;
        height: 5px;
        border-radius: 50%;
        background: #60a5fa;
        box-shadow: 0 0 5px #60a5fa;
      }

      .meter-bg {
        background: rgba(255, 255, 255, 0.08);
        height: 3px;
        width: 100%;
        border-radius: 2px;
        overflow: hidden;
        margin-top: 5px;
      }

      .meter-fill {
        height: 100%;
        background: var(--blue);
        width: 0%;
        transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 0 6px var(--blue);
      }

      .scanner-container {
        position: relative;
        overflow: hidden;
      }

      .scanner-line {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          to bottom,
          transparent,
          rgba(59, 130, 246, 0.7),
          transparent
        );
        transform: translateY(-150%);
        animation: scan-anim 2.5s infinite linear;
      }

      @keyframes scan-anim {
        0% {
          transform: translateY(-150%);
        }

        100% {
          transform: translateY(150%);
        }
      }

      @keyframes blink {
        0%,
        100% {
          opacity: 1;
        }

        50% {
          opacity: 0;
        }
      }

      .typing-cursor::after {
        content: "|";
        animation: blink 1s infinite;
      }

      .map-ctrl-btn {
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(255, 255, 255, 0.03);
        transition: all 0.2s ease;
        cursor: pointer;
        color: rgba(148, 163, 184, 0.7);
      }

      .map-ctrl-btn:hover {
        background: rgba(59, 130, 246, 0.1);
        border-color: rgba(59, 130, 246, 0.3);
        color: #e2e8f0;
      }

      #boot-screen {
        transition: opacity 0.8s ease-out;
      }

      @keyframes logFade {
        0% {
          opacity: 0;
          transform: translateX(-8px);
        }

        100% {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .log-entry {
        animation: logFade 0.3s ease-out forwards;
      }

      #map-tooltip {
        pointer-events: none;
        z-index: 100;
        transition: all 0.1s ease-out;
        backdrop-filter: blur(8px);
        font-family: "JetBrains Mono", monospace;
      }

      .day-mode {
        --solar-glow: rgba(59, 130, 246, 0.08);
      }

      .night-mode {
        --solar-glow: rgba(139, 92, 246, 0.12);
      }

      #ai-briefing-text {
        font-family: "JetBrains Mono", monospace;
        font-size: 13px;
        line-height: 1.9;
      }

      ::selection {
        background: rgba(59, 130, 246, 0.3);
        color: #fff;
      }

      .glass-panel-enhanced {
        background: rgba(5, 15, 40, 0.4);
        backdrop-filter: blur(40px) saturate(180%);
        -webkit-backdrop-filter: blur(40px) saturate(180%);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 24px;
        box-shadow:
          0 8px 32px rgba(0, 0, 0, 0.4),
          inset 0 1px 0 rgba(255, 255, 255, 0.1),
          0 0 60px rgba(59, 130, 246, 0.05);
      }

      .loading-pulse {
        animation: loading-pulse 2s ease-in-out infinite;
      }

      @keyframes loading-pulse {
        0%,
        100% {
          opacity: 0.4;
        }

        50% {
          opacity: 1;
        }
      }

      * {
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      }

      .map-ctrl-btn.active {
        background: rgba(59, 130, 246, 0.2) !important;
        border-color: rgba(59, 130, 246, 0.5) !important;
        color: #60a5fa !important;
      }

      .map-ctrl-btn.active-red {
        background: rgba(239, 68, 68, 0.2) !important;
        border-color: rgba(239, 68, 68, 0.5) !important;
        color: #f87171 !important;
      }

      .map-ctrl-btn.active-amber {
        background: rgba(245, 158, 11, 0.2) !important;
        border-color: rgba(245, 158, 11, 0.5) !important;
        color: #fbbf24 !important;
      }

      #map-interaction-overlay:hover .fixed-label {
        opacity: 1;
      }

      .dossier-card.enhanced {
        background: rgba(5, 15, 40, 0.5);
        backdrop-filter: blur(20px) saturate(150%);
        -webkit-backdrop-filter: blur(20px) saturate(150%);
        border: 1px solid rgba(59, 130, 246, 0.15);
        box-shadow:
          0 4px 16px rgba(0, 0, 0, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.05);
      }

      .shortcuts-overlay {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: rgba(2, 6, 23, 0.95);
        backdrop-filter: blur(20px);
        padding: 1.5rem;
        border-radius: 16px;
        border: 1px solid rgba(59, 130, 246, 0.2);
        font-family: "JetBrains Mono", monospace;
        font-size: 11px;
        z-index: 1000;
        display: none;
        min-width: 300px;
      }

      .shortcuts-overlay.active {
        display: block;
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }

        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .shortcut-item {
        display: flex;
        justify-content: space-between;
        padding: 0.5rem 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      }

      .shortcut-key {
        background: rgba(59, 130, 246, 0.1);
        border: 1px solid rgba(59, 130, 246, 0.3);
        padding: 2px 8px;
        border-radius: 4px;
        font-weight: 700;
        color: #60a5fa;
      }

      /* Feature 1: Per-tab AI Chat Widget */
      .tab-ai-chat {
        background: rgba(59, 130, 246, 0.04);
        border: 1px solid rgba(59, 130, 246, 0.15);
        border-radius: 12px;
        padding: 12px 14px;
        margin-bottom: 1.25rem;
        flex-shrink: 0;
      }

      .tab-ai-chat-header {
        display: flex;
        align-items: center;
        gap: 6px;
        margin-bottom: 8px;
      }

      .tab-ai-chat-response {
        font-family: "JetBrains Mono", monospace;
        font-size: 11px;
        line-height: 1.7;
        color: #94a3b8;
        min-height: 0;
        max-height: 0;
        overflow: hidden;
        transition:
          max-height 0.4s ease,
          padding 0.3s ease;
      }

      .tab-ai-chat-response.open {
        max-height: 280px;
        overflow-y: auto;
        padding-top: 8px;
        border-top: 1px solid rgba(255, 255, 255, 0.05);
        margin-top: 8px;
      }

      .tab-ai-thinking {
        display: inline-flex;
        align-items: center;
        gap: 5px;
      }

      .tab-ai-thinking span {
        display: inline-block;
        width: 5px;
        height: 5px;
        border-radius: 50%;
        background: #3b82f6;
        animation: ai-pulse 1.2s ease-in-out infinite;
      }

      .tab-ai-thinking span:nth-child(2) {
        animation-delay: 0.2s;
      }

      .tab-ai-thinking span:nth-child(3) {
        animation-delay: 0.4s;
      }

      @keyframes ai-pulse {
        0%,
        100% {
          opacity: 0.2;
          transform: scale(0.8);
        }

        50% {
          opacity: 1;
          transform: scale(1.2);
        }
      }

      .tab-ai-input {
        flex: 1;
        background: transparent;
        border: none;
        outline: none;
        color: #e2e8f0;
        font-family: "JetBrains Mono", monospace;
        font-size: 11px;
      }

      .tab-ai-input::placeholder {
        color: rgba(100, 116, 139, 0.5);
      }

      .tab-ai-send-btn {
        background: rgba(59, 130, 246, 0.15);
        border: 1px solid rgba(59, 130, 246, 0.3);
        color: #60a5fa;
        border-radius: 6px;
        padding: 3px 10px;
        font-family: "JetBrains Mono", monospace;
        font-size: 10px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.2s ease;
        text-transform: uppercase;
        letter-spacing: 0.1em;
      }

      .tab-ai-send-btn:hover {
        background: rgba(59, 130, 246, 0.3);
        border-color: rgba(59, 130, 246, 0.6);
      }
    </style>
  </head>

  <body class="flex flex-col day-mode">
    <div
      id="boot-screen"
      class="fixed inset-0 z-[9999] flex flex-col items-center justify-center"
      style="background: #020617"
    >
      <div class="w-full max-w-sm space-y-4 px-8">
        <div class="flex items-center gap-3 mb-5">
          <div
            class="w-8 h-8 rounded-xl flex items-center justify-center"
            style="
              background: linear-gradient(135deg, #1d4ed8, #0e7490);
              box-shadow: 0 0 16px rgba(59, 130, 246, 0.4);
            "
          >
            <i class="fas fa-satellite-dish text-white text-sm"></i>
          </div>
          <span
            class="font-bold tracking-widest text-white text-sm"
            style="font-family: &quot;JetBrains Mono&quot;, monospace"
            >NEWS<span class="text-blue-400">ATLAS</span></span
          >
          <span
            class="text-[9px] font-mono text-blue-400/40 border border-blue-500/20 px-1.5 py-0.5 rounded"
            >v3.7</span
          >
        </div>
        <div class="h-0.5 w-full bg-slate-900 rounded-full overflow-hidden">
          <div
            id="boot-bar"
            class="h-full w-0 transition-all duration-300 rounded-full"
            style="
              background: linear-gradient(90deg, #3b82f6, #06b6d4);
              box-shadow: 0 0 10px #3b82f6;
            "
          ></div>
        </div>
        <div
          id="boot-log"
          class="h-28 overflow-hidden flex flex-col justify-end space-y-1.5"
          style="
            font-family: &quot;JetBrains Mono&quot;, monospace;
            font-size: 10px;
            color: rgba(100, 116, 139, 0.8);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
          "
        ></div>
      </div>
    </div>

    <div
      id="map-tooltip"
      class="fixed hidden text-white rounded-xl shadow-2xl border-l-4 border-l-emerald-500 overflow-hidden"
      style="
        background: rgba(2, 6, 23, 0.97);
        border: 1px solid rgba(16, 185, 129, 0.25);
        min-width: 160px;
        backdrop-filter: blur(12px);
      "
    >
      <div
        class="flex items-center gap-2.5 px-3 pt-2.5 pb-2 border-b border-white/5"
      >
        <img
          id="tooltip-flag"
          src=""
          alt=""
          class="hidden w-8 h-5 object-cover rounded shadow"
        />
        <span
          id="tooltip-name"
          class="text-[11px] font-black text-white uppercase tracking-wider"
          style="font-family: &quot;JetBrains Mono&quot;, monospace"
        ></span>
      </div>
      <div class="px-3 py-2 flex flex-col gap-1">
        <div class="flex items-center gap-1.5">
          <span
            id="tooltip-label-1"
            class="text-[9px] text-slate-500 uppercase font-bold tracking-widest"
            style="font-family: &quot;JetBrains Mono&quot;, monospace"
            >Capital</span
          >
          <span
            id="tooltip-capital"
            class="text-[10px] text-cyan-400 font-bold"
            style="font-family: &quot;JetBrains Mono&quot;, monospace"
          ></span>
        </div>
        <div class="flex items-center gap-1.5">
          <span
            id="tooltip-label-2"
            class="text-[9px] text-slate-500 uppercase font-bold tracking-widest"
            style="font-family: &quot;JetBrains Mono&quot;, monospace"
            >Pop.</span
          >
          <span
            id="tooltip-pop"
            class="text-[10px] text-emerald-400 font-bold"
            style="font-family: &quot;JetBrains Mono&quot;, monospace"
          ></span>
        </div>
      </div>
    </div>

    <div
      id="about-overlay"
      class="fixed inset-0 hidden flex items-center justify-center p-6"
    >
      <div
        class="glass-panel max-w-5xl w-full p-0 border-blue-500/20 relative overflow-hidden flex flex-col z-20 h-[85vh]"
        style="border-radius: 1.25rem"
      >
        <div
          class="px-14 py-7 border-b border-white/5 relative overflow-hidden flex-shrink-0"
          style="background: rgba(59, 130, 246, 0.06)"
        >
          <div
            class="absolute -top-10 -right-10 w-64 h-64 rounded-full blur-[80px]"
            style="background: rgba(59, 130, 246, 0.12)"
          ></div>
          <button
            onclick="toggleAbout(false)"
            class="absolute top-5 right-5 tactical-btn w-9 h-9 flex items-center justify-center rounded-xl border border-white/10 text-slate-400 hover:text-white hover:border-white/20 z-50 cursor-pointer"
            style="background: rgba(255, 255, 255, 0.04)"
          >
            <i class="fas fa-times text-sm"></i>
          </button>
          <div class="flex items-center gap-5 relative z-10">
            <div
              class="w-16 h-16 rounded-xl flex items-center justify-center shadow-lg border border-white/15 scanner-container"
              style="background: linear-gradient(135deg, #1d4ed8, #312e81)"
            >
              <i class="fas fa-fingerprint text-3xl text-white"></i>
              <div class="scanner-line"></div>
            </div>
            <div>
              <h2
                class="text-2xl font-black text-white uppercase tracking-tight"
              >
                Abhishek Sati
              </h2>
              <p
                class="text-blue-400 font-bold text-xs uppercase tracking-[.3em] mt-1"
                style="font-family: &quot;JetBrains Mono&quot;, monospace"
              >
                Lead Systems Architect
              </p>
              <div class="flex items-center gap-2 mt-2">
                <div
                  class="w-1.5 h-1.5 bg-emerald-400 rounded-full animate-pulse"
                ></div>
                <span
                  class="text-emerald-400 font-bold uppercase tracking-widest"
                  style="
                    font-family: &quot;JetBrains Mono&quot;, monospace;
                    font-size: 9px;
                  "
                  >Clearance: Level 5</span
                >
              </div>
            </div>
          </div>
        </div>
        <div
          class="flex-1 overflow-y-auto pl-14 pr-10 pt-7 pb-24 custom-scrollbar"
          style="background: rgba(2, 6, 23, 0.92)"
        >
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 h-full">
            <div class="flex flex-col gap-5 h-full">
              <div
                class="dossier-card min-h-[120px]"
                style="
                  background: rgba(255, 255, 255, 0.015);
                  border-color: rgba(255, 255, 255, 0.05);
                "
              >
                <h3
                  class="text-[9px] font-black text-slate-500 uppercase tracking-[.2em] mb-3"
                  style="font-family: &quot;JetBrains Mono&quot;, monospace"
                >
                  Architect Statement
                </h3>
                <p
                  id="bio-text"
                  class="text-sm leading-relaxed text-slate-300 font-medium typing-cursor"
                ></p>
              </div>
              <div
                class="dossier-card"
                style="
                  background: rgba(59, 130, 246, 0.04);
                  border-color: rgba(59, 130, 246, 0.12);
                "
              >
                <h3
                  class="text-[9px] font-black text-blue-400 uppercase tracking-[.2em] mb-3"
                  style="font-family: &quot;JetBrains Mono&quot;, monospace"
                >
                  Core Technologies
                </h3>
                <div class="flex flex-wrap gap-1.5">
                  <span class="skill-tag">
                    <div class="skill-dot"></div>
                    D3.js v7
                  </span>
                  <span class="skill-tag">
                    <div class="skill-dot"></div>
                    Vanilla JS ES2023
                  </span>
                  <span class="skill-tag">
                    <div class="skill-dot"></div>
                    Firebase Auth
                  </span>
                  <span class="skill-tag">
                    <div class="skill-dot"></div>
                    Firestore
                  </span>
                  <span class="skill-tag">
                    <div class="skill-dot"></div>
                    Vercel Edge
                  </span>
                  <span class="skill-tag">
                    <div class="skill-dot"></div>
                    Web Audio API
                  </span>
                  <span class="skill-tag">
                    <div class="skill-dot"></div>
                    Canvas 2D
                  </span>
                  <span class="skill-tag">
                    <div class="skill-dot"></div>
                    SVG Projection
                  </span>
                  <span class="skill-tag">
                    <div class="skill-dot"></div>
                    Tailwind CSS
                  </span>
                  <span class="skill-tag">
                    <div class="skill-dot"></div>
                    Groq AI
                  </span>
                </div>
              </div>
              <div
                class="dossier-card flex-1 flex flex-col"
                style="
                  background: rgba(16, 185, 129, 0.03);
                  border-color: rgba(16, 185, 129, 0.12);
                "
              >
                <h3
                  class="text-[9px] font-black text-emerald-400 uppercase tracking-[.2em] mb-3"
                  style="font-family: &quot;JetBrains Mono&quot;, monospace"
                >
                  Active Intel Feeds
                </h3>
                <div class="space-y-2 text-[10px] font-mono">
                  <div class="flex items-center justify-between">
                    <div class="flex items-center gap-2">
                      <div
                        class="w-1.5 h-1.5 bg-emerald-400 rounded-full"
                      ></div>
                      <span class="text-slate-300">Newsdata.io</span>
                    </div>
                    <span class="text-slate-500">Global Feed</span>
                  </div>
                  <div class="flex items-center justify-between">
                    <div class="flex items-center gap-2">
                      <div
                        class="w-1.5 h-1.5 bg-emerald-400 rounded-full"
                      ></div>
                      <span class="text-slate-300">CoinGecko</span>
                    </div>
                    <span class="text-slate-500">Crypto Mkts</span>
                  </div>
                  <div class="flex items-center justify-between">
                    <div class="flex items-center gap-2">
                      <div
                        class="w-1.5 h-1.5 bg-emerald-400 rounded-full"
                      ></div>
                      <span class="text-slate-300">OpenExchange</span>
                    </div>
                    <span class="text-slate-500">Forex Rates</span>
                  </div>
                  <div class="flex items-center justify-between">
                    <div class="flex items-center gap-2">
                      <div
                        class="w-1.5 h-1.5 bg-emerald-400 rounded-full"
                      ></div>
                      <span class="text-slate-300">Gold-API</span>
                    </div>
                    <span class="text-slate-300">Commodities</span>
                  </div>
                  <div class="flex items-center justify-between">
                    <div class="flex items-center gap-2">
                      <div class="w-1.5 h-1.5 bg-blue-400 rounded-full"></div>
                      <span class="text-slate-300">World Bank</span>
                    </div>
                    <span class="text-slate-500">GDP/Debt</span>
                  </div>
                  <div class="flex items-center justify-between">
                    <div class="flex items-center gap-2">
                      <div class="w-1.5 h-1.5 bg-blue-400 rounded-full"></div>
                      <span class="text-slate-300">Open-Meteo</span>
                    </div>
                    <span class="text-slate-500">Atmosphere</span>
                  </div>

                  <div class="flex items-center justify-between">
                    <div class="flex items-center gap-2">
                      <div class="w-1.5 h-1.5 bg-purple-400 rounded-full"></div>
                      <span class="text-slate-300">CountriesNow</span>
                    </div>
                    <span class="text-slate-500">Geo-Data</span>
                  </div>
                </div>
              </div>
              <div
                class="dossier-card mb-6"
                style="
                  background: rgba(255, 255, 255, 0.015);
                  border-color: rgba(255, 255, 255, 0.05);
                "
              >
                <div class="flex gap-5 justify-center">
                  <a
                    href="https://github.com/abhisheksati132"
                    target="_blank"
                    class="text-slate-500 hover:text-white transition-colors tactical-btn"
                    ><i class="fab fa-github text-xl"></i
                  ></a>
                  <a
                    href="https://www.linkedin.com/in/abhisheksati132"
                    target="_blank"
                    class="text-slate-500 hover:text-blue-400 transition-colors tactical-btn"
                    ><i class="fab fa-linkedin text-xl"></i
                  ></a>
                  <a
                    href="https://www.instagram.com/satiabhishek/"
                    target="_blank"
                    class="text-slate-500 hover:text-pink-500 transition-colors tactical-btn"
                    ><i class="fab fa-instagram text-xl"></i
                  ></a>
                </div>
              </div>
            </div>
            <div class="flex flex-col gap-5 h-full">
              <div class="grid grid-cols-3 gap-3">
                <div
                  class="dossier-card p-4"
                  style="
                    background: rgba(59, 130, 246, 0.04);
                    border-color: rgba(59, 130, 246, 0.15);
                  "
                >
                  <div class="flex justify-between items-end mb-1">
                    <div
                      class="text-[9px] text-slate-500 uppercase font-black tracking-widest"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >
                      CPU Load
                    </div>
                    <div
                      class="text-[10px] text-blue-400 font-mono font-bold"
                      id="cpu-val"
                    >
                      0%
                    </div>
                  </div>
                  <div class="meter-bg">
                    <div
                      id="cpu-bar"
                      class="meter-fill"
                      style="width: 0%"
                    ></div>
                  </div>
                </div>
                <div
                  class="dossier-card p-4"
                  style="
                    background: rgba(16, 185, 129, 0.03);
                    border-color: rgba(16, 185, 129, 0.15);
                  "
                >
                  <div class="flex justify-between items-end mb-1">
                    <div
                      class="text-[9px] text-slate-500 uppercase font-black tracking-widest"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >
                      Memory
                    </div>
                    <div
                      class="text-[10px] text-emerald-400 font-mono font-bold"
                      id="mem-val"
                    >
                      0GB
                    </div>
                  </div>
                  <div class="meter-bg">
                    <div
                      id="mem-bar"
                      class="meter-fill"
                      style="
                        width: 0%;
                        background: #10b981;
                        box-shadow: 0 0 6px #10b981;
                      "
                    ></div>
                  </div>
                </div>
                <div
                  class="dossier-card p-4"
                  style="
                    background: rgba(99, 102, 241, 0.03);
                    border-color: rgba(99, 102, 241, 0.15);
                  "
                >
                  <div
                    class="text-[9px] text-slate-500 uppercase font-black tracking-widest mb-1"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    Uptime
                  </div>
                  <div
                    class="text-xl font-black text-white tabular-nums"
                    id="uptime-counter"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    00:00:00
                  </div>
                </div>
              </div>
              <div
                class="dossier-card p-0 overflow-hidden relative h-28"
                style="
                  background: rgba(0, 0, 0, 0.5);
                  border-color: rgba(255, 255, 255, 0.05);
                "
              >
                <div
                  class="absolute top-2 left-3 right-3 flex justify-between z-10"
                >
                  <div
                    class="text-[9px] text-slate-500 font-black uppercase tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    Network Traffic
                  </div>
                  <div class="text-[9px] text-blue-400 font-mono font-bold">
                    <i class="fas fa-arrow-down"></i>
                    <span id="net-down">0</span> MB/s &nbsp;<i
                      class="fas fa-arrow-up"
                    ></i>
                    <span id="net-up">0</span> MB/s
                  </div>
                </div>
                <canvas
                  id="traffic-canvas"
                  class="w-full h-full opacity-60"
                ></canvas>
              </div>
              <div class="grid grid-cols-2 gap-3">
                <div
                  class="dossier-card"
                  style="
                    background: rgba(139, 92, 246, 0.04);
                    border-color: rgba(139, 92, 246, 0.15);
                  "
                >
                  <h3
                    class="text-[9px] font-black text-purple-400 uppercase tracking-[.2em] mb-3"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    System Architecture
                  </h3>
                  <div class="space-y-2 text-[10px] font-mono text-slate-400">
                    <div class="flex items-center gap-2">
                      <i class="fas fa-layer-group text-purple-400 text-xs"></i
                      >Serverless Routes (Vercel)
                    </div>
                    <div class="flex items-center gap-2">
                      <i class="fas fa-map text-blue-400 text-xs"></i>D3.js Geo
                      Projection
                    </div>
                    <div class="flex items-center gap-2">
                      <i class="fas fa-fire text-amber-400 text-xs"></i>Firebase
                      Auth + DB
                    </div>
                    <div class="flex items-center gap-2">
                      <i class="fas fa-brain text-emerald-400 text-xs"></i>Groq
                      Llama 3 AI Core
                    </div>

                    <div class="flex items-center gap-2">
                      <i class="fas fa-wave-square text-pink-400 text-xs"></i
                      >Web Audio API Engine
                    </div>
                  </div>
                </div>
                <div
                  class="dossier-card"
                  style="
                    background: rgba(6, 182, 212, 0.04);
                    border-color: rgba(6, 182, 212, 0.15);
                  "
                >
                  <h3
                    class="text-[9px] font-black text-cyan-400 uppercase tracking-[.2em] mb-3"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    Map Capabilities
                  </h3>
                  <div class="space-y-2 text-[10px] font-mono text-slate-400">
                    <div class="flex items-center gap-2">
                      <i class="fas fa-circle-nodes text-blue-400 text-xs"></i
                      >Particle Data Mesh
                    </div>
                    <div class="flex items-center gap-2">
                      <i
                        class="fas fa-location-dot text-emerald-400 text-xs"
                      ></i
                      >Interactive Sovereignty
                    </div>
                    <div class="flex items-center gap-2">
                      <i class="fas fa-search-plus text-amber-400 text-xs"></i
                      >Smooth Vector Zoom
                    </div>
                    <div class="flex items-center gap-2">
                      <i class="fas fa-globe text-purple-400 text-xs"></i>Dual
                      2D/3D Projection
                    </div>

                    <div class="flex items-center gap-2">
                      <i class="fas fa-chart-area text-pink-400 text-xs"></i
                      >Live Telemetry Ticker
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="dossier-card mb-6 p-0 font-mono text-[10px] flex-1 min-h-[140px] flex flex-col relative rounded-xl overflow-hidden"
                style="
                  background: rgba(0, 0, 0, 0.75);
                  border-color: rgba(255, 255, 255, 0.08);
                "
              >
                <div
                  class="px-3 py-2 border-b border-white/5 flex justify-between items-center"
                  style="background: rgba(59, 130, 246, 0.05)"
                >
                  <span
                    class="text-blue-400 font-bold uppercase tracking-widest text-[9px]"
                    >Command Line Interface</span
                  >
                  <div class="flex gap-1.5">
                    <div class="w-2 h-2 rounded-full bg-red-500/80"></div>
                    <div class="w-2 h-2 rounded-full bg-yellow-500/80"></div>
                    <div class="w-2 h-2 rounded-full bg-emerald-500/80"></div>
                  </div>
                </div>
                <div
                  id="cli-output"
                  class="flex-1 overflow-y-auto p-3 space-y-1.5 text-slate-300 no-scrollbar"
                >
                  <div class="text-emerald-400/70">
                    > SYSTEM READY. WAITING FOR INPUT...
                  </div>
                </div>
                <div
                  class="p-2 border-t border-white/8 flex items-center gap-2"
                  style="background: rgba(59, 130, 246, 0.03)"
                >
                  <span class="text-blue-400 font-bold">›</span>
                  <input
                    type="text"
                    id="cli-input"
                    class="bg-transparent border-none outline-none w-full text-white placeholder-slate-700 text-[11px]"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    placeholder="Enter command (e.g., 'analyze economy')..."
                    autocomplete="off"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
        <div
          class="px-14 py-5 border-t border-white/5 flex items-center justify-between flex-shrink-0 bg-[#020617]/95"
        >
          <div class="flex items-center gap-2">
            <div
              class="w-1.5 h-1.5 bg-emerald-400 rounded-full animate-pulse"
            ></div>
            <span
              class="text-[9px] text-slate-500 font-bold uppercase tracking-widest"
              style="font-family: &quot;JetBrains Mono&quot;, monospace"
              >System Online</span
            >
          </div>
          <p
            class="text-[9px] text-slate-600 font-black uppercase tracking-widest"
            style="font-family: &quot;JetBrains Mono&quot;, monospace"
          >
            © 2026 ABHISHEK SATI
          </p>
        </div>
      </div>
    </div>

    <div
      id="search-overlay"
      class="fixed inset-0 hidden flex items-center justify-center z-[100] px-6"
    >
      <div
        class="glass-panel max-w-3xl w-full border-blue-500/20 flex flex-col max-h-[75vh] overflow-hidden p-0"
      >
        <div
          class="flex items-center p-6 gap-5 shrink-0 border-b border-white/8"
        >
          <i class="fas fa-crosshairs text-blue-400 text-2xl"></i>
          <input
            type="text"
            id="country-search"
            autocomplete="off"
            placeholder="Sector designation..."
            class="w-full bg-transparent border-none outline-none text-2xl font-black text-white placeholder-slate-800"
          />
          <span
            class="text-[10px] font-black text-slate-600 px-3 py-1.5 rounded-xl uppercase tracking-widest cursor-pointer hover:text-white transition-colors"
            style="
              background: rgba(255, 255, 255, 0.04);
              border: 1px solid rgba(255, 255, 255, 0.08);
              font-family: &quot;JetBrains Mono&quot;, monospace;
            "
            onclick="toggleSearch()"
            >ESC</span
          >
        </div>
        <div id="search-results" class="flex-1 overflow-y-auto"></div>
      </div>
    </div>

    <header>
      <div
        class="flex items-center gap-4 cursor-pointer group"
        onclick="resetToGlobalCenter()"
      >
        <div class="relative w-14 h-14">
          <div
            class="absolute inset-0 rounded-xl flex items-center justify-center transition-transform group-hover:rotate-6"
            style="
              background: linear-gradient(135deg, #1d4ed8, #0e7490);
              box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
            "
          >
            <i class="fas fa-satellite-dish text-[28px] text-white"></i>
          </div>
          <div
            class="absolute -top-0.5 -right-0.5 w-4 h-4 bg-emerald-400 rounded-full border-2 border-[#020617] animate-pulse"
          ></div>
        </div>
        <div>
          <h1
            class="text-[28px] font-black tracking-tighter text-white leading-none"
          >
            News<span class="text-blue-400">Atlas</span>
          </h1>
          <p
            class="text-[11px] uppercase tracking-[.3em] text-slate-500 font-black mt-1 leading-none"
            style="font-family: &quot;JetBrains Mono&quot;, monospace"
          >
            Intelligence Terminal
          </p>
        </div>
      </div>

      <div
        class="hidden lg:flex items-center gap-3 xl:gap-4 px-4 xl:px-6 h-[68px] rounded-xl"
        style="
          background: rgba(255, 255, 255, 0.02);
          border: 1px solid rgba(255, 255, 255, 0.06);
        "
      >
        <div
          class="flex flex-col min-w-[140px] xl:min-w-[170px] justify-center"
        >
          <span
            id="selected-country-name"
            class="font-black text-white text-lg uppercase truncate tracking-tight leading-none"
            >GLOBAL SURVEILLANCE</span
          >
          <span
            id="neural-id"
            class="text-xs font-bold text-slate-500 uppercase tracking-[.2em] mt-1.5 leading-none"
            style="font-family: &quot;JetBrains Mono&quot;, monospace"
            >handshake verified</span
          >
        </div>
        <div class="h-10 w-px bg-slate-800"></div>
        <div class="flex flex-col justify-center">
          <span
            class="text-[11px] font-bold text-slate-500 uppercase tracking-widest leading-none"
            >Seismic Status</span
          >
          <div class="flex items-center gap-2 mt-1.5">
            <div
              class="w-1.5 h-1.5 bg-amber-400 rounded-full animate-pulse"
            ></div>
            <span
              id="seismic-count"
              class="text-sm font-black text-amber-400 font-mono leading-none"
              >--</span
            >
            <span
              class="text-[10px] text-slate-600 font-bold uppercase tracking-tighter"
              >Events/Hr</span
            >
          </div>
        </div>
      </div>
      <div
        class="flex items-center gap-3 xl:gap-5 px-4 xl:px-6 h-[68px] rounded-xl"
        style="
          background: rgba(255, 255, 255, 0.02);
          border: 1px solid rgba(255, 255, 255, 0.06);
        "
      >
        <div class="flex flex-col items-center justify-center">
          <span
            id="system-time"
            class="text-3xl font-black text-blue-400 tabular-nums leading-none"
            style="font-family: &quot;JetBrains Mono&quot;, monospace"
            >00:00:00</span
          >
          <span
            class="text-[11px] font-bold text-slate-600 uppercase mt-1 tracking-[.2em]"
            style="font-family: &quot;JetBrains Mono&quot;, monospace"
            >UTC ·
            <span id="local-time" class="text-slate-500">--:--:--</span></span
          >
        </div>
        <div class="h-10 w-px bg-slate-800"></div>
        <div class="flex items-center gap-2 xl:gap-4">
          <button
            onclick="upgradeToGoogle()"
            class="text-slate-500 hover:text-white transition-all tactical-btn"
            title="Verify Identity"
          >
            <i class="fas fa-user-shield text-lg"></i>
          </button>
          <button
            onclick="downloadDossier()"
            class="text-slate-500 hover:text-white transition-all tactical-btn"
            title="Download Intel Dossier"
          >
            <i class="fas fa-file-download text-lg"></i>
          </button>
          <button
            onclick="toggleProjection()"
            class="text-slate-500 hover:text-blue-400 transition-all tactical-btn"
            title="Toggle Projection"
          >
            <i class="fas fa-globe-asia text-lg"></i>
          </button>
          <button
            onclick="toggleSearch()"
            class="text-slate-500 hover:text-blue-400 transition-all tactical-btn"
            title="Search"
          >
            <i class="fas fa-search text-lg"></i>
          </button>
          <button
            onclick="activateVoice()"
            class="text-slate-500 hover:text-red-400 transition-all tactical-btn"
            title="Voice Command"
          >
            <i class="fas fa-microphone text-lg"></i>
          </button>
          <button
            onclick="toggleAbout(true)"
            class="text-slate-500 hover:text-emerald-400 transition-all tactical-btn"
            title="About"
          >
            <i class="fas fa-info-circle text-lg"></i>
          </button>
        </div>
      </div>

      <div class="flex items-center gap-4">
        <button
          onclick="goToIndiaHome()"
          class="flex items-center justify-center gap-2 px-4 xl:px-6 h-[68px] rounded-xl tactical-btn group transition-all"
          style="
            background: rgba(2, 6, 23, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.06);
          "
        >
          <i
            class="fas fa-home text-blue-400 text-lg group-hover:text-white transition-colors"
          ></i>
          <span
            class="text-sm font-black text-white uppercase tracking-widest"
            style="font-family: &quot;JetBrains Mono&quot;, monospace"
            >India Base</span
          >
        </button>
      </div>
    </header>

    <main class="main-content">
      <div
        id="map-box-id"
        class="map-box"
        onmouseleave="deactivateMapInteraction()"
      >
        <div
          class="px-4 py-3 border-b border-white/6 flex justify-between items-center flex-shrink-0"
          style="background: rgba(59, 130, 246, 0.03)"
        >
          <div class="flex items-center gap-3">
            <span
              id="projection-label"
              class="text-xs font-black text-slate-300 uppercase tracking-widest"
              style="font-family: &quot;JetBrains Mono&quot;, monospace"
              >Orbital Interface: 2D Active</span
            >
            <div
              id="active-sector-display"
              class="hidden flex items-center gap-3 px-3 py-1 rounded-xl"
              style="
                background: rgba(59, 130, 246, 0.08);
                border: 1px solid rgba(59, 130, 246, 0.2);
              "
            >
              <img
                id="sector-flag"
                src=""
                alt="Flag"
                class="w-7 h-4.5 object-cover rounded shadow-sm"
              />
              <span
                id="sector-name"
                class="text-[11px] font-black text-blue-200 uppercase tracking-widest"
                style="font-family: &quot;JetBrains Mono&quot;, monospace"
                >--</span
              >
            </div>
          </div>
          <div class="flex gap-2">
            <button
              id="quake-toggle-btn"
              onclick="toggleEarthquakeLayer()"
              class="map-ctrl-btn text-slate-400"
              title="Earthquake Layer: OFF"
            >
              <i class="fas fa-radiation text-xs"></i>
            </button>

            <button
              id="aircraft-toggle-btn"
              onclick="toggleAircraftLayer()"
              class="map-ctrl-btn text-slate-400"
              title="Live Aircraft: OFF"
            >
              <i class="fas fa-plane text-xs"></i>
            </button>

            <button
              id="gdelt-toggle-btn"
              onclick="toggleGDELTLayer()"
              class="map-ctrl-btn text-slate-400"
              title="Global Conflict Hexbins: OFF"
            >
              <i class="fas fa-crosshairs text-xs"></i>
            </button>

            <button onclick="zoomMap(1.6)" class="map-ctrl-btn" title="Zoom In">
              <i class="fas fa-plus text-xs"></i>
            </button>
            <button
              onclick="zoomMap(0.6)"
              class="map-ctrl-btn"
              title="Zoom Out"
            >
              <i class="fas fa-minus text-xs"></i>
            </button>
            <button
              id="theme-toggle-btn"
              onclick="toggleGlobeTheme()"
              class="map-ctrl-btn"
              title="Globe Theme: NIGHT"
            >
              <i class="fas fa-moon text-xs"></i>
            </button>
            <button
              onclick="resetToGlobalCenter()"
              class="map-ctrl-btn text-blue-400"
              title="Reset View"
            >
              <i class="fas fa-expand text-xs"></i>
            </button>
          </div>
        </div>

        <div id="map-container" class="flex-1 relative w-full h-full">
          <svg id="world-map" class="w-full h-full"></svg>
          <div class="map-scan-line"></div>

          <!-- CLICK TO INTERACT OVERLAY -->
          <div
            id="map-interaction-overlay"
            class="absolute inset-0 flex items-center justify-center bg-transparent z-10 transition-colors duration-300 hover:bg-slate-900/40 cursor-pointer"
            onclick="activateMapInteraction()"
          >
            <div
              class="fixed-label px-6 py-3 rounded border border-blue-500/50 bg-slate-900/80 text-blue-100 font-mono text-sm tracking-widest flex items-center gap-3 transition-opacity duration-300 opacity-0 pointer-events-none"
            >
              <i class="fas fa-hand-pointer text-blue-400"></i>
              <span>CLICK TO INTERACT</span>
            </div>
          </div>

          <!-- CHRONOS SLIDER -->
          <div
            id="chronos-slider-container"
            class="absolute bottom-6 left-1/2 transform -translate-x-1/2 w-3/4 max-w-2xl px-6 py-3 rounded-2xl glass-panel z-10 flex flex-col gap-2 transition-all opacity-90 hover:opacity-100"
            style="
              background: rgba(2, 6, 23, 0.65);
              border: 1px solid rgba(59, 130, 246, 0.2);
              backdrop-filter: blur(12px);
            "
          >
            <div class="flex justify-between items-center w-full">
              <span
                class="text-[10px] font-black text-blue-400 uppercase tracking-widest font-mono"
                >Chronos Engine</span
              >
              <span
                id="chronos-display"
                class="text-xs font-bold text-white tracking-widest font-mono"
                >LIVE / -0H</span
              >
            </div>
            <input
              type="range"
              id="chronos-slider"
              min="-72"
              max="0"
              value="0"
              step="1"
              class="w-full h-1 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500 hover:accent-blue-400"
              style="outline: none"
              oninput="updateChronos(this.value)"
            />
            <div
              class="flex justify-between w-full text-[8px] text-slate-500 font-mono font-bold"
            >
              <span>T-72H</span>
              <span>T-48H</span>
              <span>T-24H</span>
              <span>LIVE</span>
            </div>
          </div>

          <div
            id="map-overlay-guard"
            class="map-interaction-overlay"
            onclick="activateMapInteraction()"
          >
            <div
              class="flex items-center gap-3 px-5 py-2.5 rounded-full font-bold uppercase tracking-widest text-xs text-blue-300 transition-transform hover:scale-105"
              style="
                background: rgba(2, 6, 23, 0.7);
                border: 1px solid rgba(59, 130, 246, 0.3);
                backdrop-filter: blur(8px);
                font-family: &quot;JetBrains Mono&quot;, monospace;
              "
            >
              <i class="fas fa-mouse-pointer"></i> Click to Interact
            </div>
          </div>
        </div>
      </div>

      <div id="sidebar" class="intel-sidebar glass-panel">
        <nav
          class="flex border-b border-white/6 w-full overflow-hidden"
          style="border-radius: 1rem 1rem 0 0"
        >
          <div
            class="nav-tab active"
            onmouseenter="playTacticalSound('hover')"
            onclick="switchTab('intel')"
          >
            Intel
          </div>
          <div
            class="nav-tab"
            onmouseenter="playTacticalSound('hover')"
            onclick="switchTab('news')"
          >
            News
          </div>
          <div
            class="nav-tab"
            onmouseenter="playTacticalSound('hover')"
            onclick="switchTab('markets')"
          >
            Markets
          </div>
          <div
            class="nav-tab"
            onmouseenter="playTacticalSound('hover')"
            onclick="switchTab('atmosphere')"
          >
            Atmosphere
          </div>
          <div
            class="nav-tab"
            onmouseenter="playTacticalSound('hover')"
            onclick="switchTab('economic')"
          >
            Economic
          </div>
        </nav>

        <div id="sidebar-content" class="flex-1 overflow-hidden relative">
          <div id="tab-intel" class="tab-content active">
            <div class="content-scroll-area space-y-4">
              <div class="tab-ai-chat">
                <div class="tab-ai-chat-header">
                  <i class="fas fa-brain text-blue-400 text-xs"></i>
                  <span
                    class="text-[9px] font-black text-blue-400 uppercase tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >Intel AI · Ask Anything</span
                  >
                  <div class="flex-1"></div>
                  <div
                    class="w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"
                  ></div>
                </div>
                <div
                  class="flex items-center gap-2 bg-black/30 rounded-xl px-3 py-2"
                  style="border: 1px solid rgba(255, 255, 255, 0.06)"
                >
                  <input
                    type="text"
                    class="tab-ai-input"
                    id="ai-chat-input-intel"
                    placeholder="Ask about geopolitics, threats, stability..."
                    onkeydown="if (event.key === 'Enter') sendTabAI('intel');"
                    autocomplete="off"
                  />
                  <button class="tab-ai-send-btn" onclick="sendTabAI('intel')">
                    ASK
                  </button>
                </div>
                <div
                  class="tab-ai-chat-response"
                  id="ai-chat-response-intel"
                ></div>
              </div>

              <div id="hierarchy-panel" class="hidden">
                <div class="flex items-center gap-2 text-xs font-mono mb-3">
                  <span
                    class="text-blue-400 cursor-pointer"
                    onclick="resetToCountry()"
                  >
                    <i class="fas fa-globe"></i>
                    <span id="breadcrumb-country">Country</span>
                  </span>
                  <span id="breadcrumb-state-wrapper" class="hidden">
                    <span class="text-slate-500"> › </span>
                    <span
                      class="text-cyan-400 cursor-pointer"
                      onclick="resetToState()"
                    >
                      <span id="breadcrumb-state">State</span>
                    </span>
                  </span>
                  <span id="breadcrumb-city-wrapper" class="hidden">
                    <span class="text-slate-500"> › </span>
                    <span class="text-emerald-400">
                      <i class="fas fa-city"></i>
                      <span id="breadcrumb-city">City</span>
                    </span>
                  </span>
                </div>

                <div id="state-selector" class="dossier-card p-4 hidden">
                  <h4
                    class="text-xs font-mono font-bold text-blue-400 uppercase tracking-widest mb-3"
                  >
                    <i class="fas fa-map"></i> Select State/Region
                  </h4>
                  <input
                    id="state-search"
                    type="text"
                    placeholder="🔍 Search states..."
                    oninput="filterStateList(this.value)"
                    class="w-full mb-3 bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-xs text-white placeholder-slate-600 focus:border-blue-400 focus:outline-none"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  />
                  <div
                    id="state-list"
                    class="grid grid-cols-2 gap-2 max-h-48 overflow-y-auto"
                  ></div>
                </div>

                <div id="city-selector" class="dossier-card p-4 hidden mt-3">
                  <h4
                    class="text-xs font-mono font-bold text-cyan-400 uppercase tracking-widest mb-3"
                  >
                    <i class="fas fa-city"></i> Select City
                  </h4>
                  <input
                    id="city-search"
                    type="text"
                    placeholder="🔍 Search cities..."
                    oninput="filterCityList(this.value)"
                    class="w-full mb-3 bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-xs text-white placeholder-slate-600 focus:border-cyan-400 focus:outline-none"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  />
                  <div
                    id="city-list"
                    class="grid grid-cols-2 gap-2 max-h-48 overflow-y-auto"
                  ></div>
                </div>
              </div>

              <div>
                <div
                  class="dossier-card mb-4"
                  style="
                    background: rgba(16, 185, 129, 0.04);
                    border-color: rgba(16, 185, 129, 0.15);
                  "
                >
                  <div
                    class="flex justify-between items-center mb-3 border-b border-white/5 pb-3"
                  >
                    <span
                      class="text-[10px] text-emerald-400 uppercase font-black tracking-widest"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >
                      <i class="fas fa-microchip mr-2"></i>GDELT Event Matrix
                    </span>
                    <span
                      class="text-[8px] text-slate-600 font-mono"
                      id="gdelt-timestamp"
                      >GDELT · Live Scan</span
                    >
                  </div>
                  <div id="gdelt-events-content" class="space-y-0">
                    <div class="text-slate-500 text-xs animate-pulse py-2">
                      Scanning GDELT intelligence matrix...
                    </div>
                  </div>
                </div>

                <div
                  id="ai-briefing-box"
                  class="dossier-card mb-4"
                  style="
                    background: rgba(59, 130, 246, 0.05);
                    border-color: rgba(59, 130, 246, 0.2);
                  "
                >
                  <div
                    class="flex justify-between items-center mb-5 border-b border-white/5 pb-4"
                  >
                    <span
                      class="text-[9px] text-blue-400 uppercase font-black tracking-widest flex items-center gap-2"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >
                      <i class="fas fa-brain text-base"></i> Neural Synthesis
                    </span>
                    <div class="flex items-center gap-2">
                      <div
                        class="w-1.5 h-1.5 bg-emerald-400 rounded-full animate-pulse"
                      ></div>
                      <span
                        class="text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                        >Live Link</span
                      >
                    </div>
                  </div>
                  <p id="ai-briefing-text" class="text-slate-300">
                    <span class="animate-pulse text-slate-500"
                      >Awaiting target selection...</span
                    >
                  </p>
                </div>
              </div>
            </div>
          </div>

          <div id="tab-news" class="tab-content">
            <div style="padding: 1.25rem 1.25rem 0 1.25rem; flex-shrink: 0">
              <div class="tab-ai-chat">
                <div class="tab-ai-chat-header">
                  <i class="fas fa-newspaper text-cyan-400 text-xs"></i>
                  <span
                    class="text-[9px] font-black text-cyan-400 uppercase tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >News AI · Ask Anything</span
                  >
                  <div class="flex-1"></div>
                  <div
                    class="w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"
                  ></div>
                </div>
                <div
                  class="flex items-center gap-2 bg-black/30 rounded-xl px-3 py-2"
                  style="border: 1px solid rgba(255, 255, 255, 0.06)"
                >
                  <input
                    type="text"
                    class="tab-ai-input"
                    id="ai-chat-input-news"
                    placeholder="Summarize today's news, explain an event..."
                    onkeydown="if (event.key === 'Enter') sendTabAI('news');"
                    autocomplete="off"
                  />
                  <button class="tab-ai-send-btn" onclick="sendTabAI('news')">
                    ASK
                  </button>
                </div>
                <div
                  class="tab-ai-chat-response"
                  id="ai-chat-response-news"
                ></div>
              </div>
            </div>
            <div
              class="px-5 py-4 flex flex-col gap-3 border-b border-white/5"
              style="background: rgba(59, 130, 246, 0.02)"
            >
              <div class="flex justify-between items-end">
                <h2
                  class="text-[11px] font-black text-white uppercase tracking-[.3em]"
                  style="font-family: &quot;JetBrains Mono&quot;, monospace"
                >
                  Signal Intelligence
                </h2>
                <span
                  class="text-[9px] text-slate-500 uppercase font-bold tracking-widest"
                  style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  ><span id="news-count">0</span> FRAGMENTS</span
                >
              </div>

              <div class="flex gap-2 items-center">
                <div class="flex-1 relative">
                  <input
                    type="text"
                    id="news-search"
                    placeholder="🔍 Search articles..."
                    class="w-full bg-black/30 border border-white/10 rounded-xl px-4 py-2 text-sm text-white placeholder-slate-600 focus:border-blue-400 focus:outline-none"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    oninput="filterNews(this.value)"
                  />
                </div>
                <button
                  onclick="clearNewsSearch()"
                  class="px-4 py-2 text-xs font-mono font-bold text-slate-400 hover:text-white border border-white/10 rounded-xl hover:border-blue-400 transition-all"
                >
                  CLEAR
                </button>
              </div>

              <div
                class="flex gap-2 overflow-x-auto no-scrollbar w-full items-center"
              >
                <div
                  class="intel-tab active"
                  onclick="window.setCategory(this, 'top')"
                >
                  Headlines
                </div>
                <div
                  class="intel-tab"
                  onclick="window.setCategory(this, 'politics')"
                >
                  Politics
                </div>
                <div
                  class="intel-tab"
                  onclick="window.setCategory(this, 'business')"
                >
                  Business
                </div>
                <div
                  class="intel-tab"
                  onclick="window.setCategory(this, 'technology')"
                >
                  Tech
                </div>
                <div
                  class="intel-tab"
                  onclick="window.setCategory(this, 'science')"
                >
                  Science
                </div>
                <div
                  class="intel-tab"
                  onclick="window.setCategory(this, 'health')"
                >
                  Health
                </div>
                <div
                  class="intel-tab"
                  onclick="window.setCategory(this, 'sports')"
                >
                  Sports
                </div>
                <div
                  class="intel-tab"
                  onclick="window.setCategory(this, 'entertainment')"
                >
                  Entmt
                </div>
                <div
                  class="intel-tab"
                  onclick="window.setCategory(this, 'environment')"
                >
                  Eco
                </div>
                <div
                  class="intel-tab"
                  onclick="window.setCategory(this, 'crypto')"
                >
                  Crypto
                </div>
                <div class="w-10 shrink-0"></div>
              </div>
            </div>
            <div
              class="content-scroll-area"
              id="news-scroll-container"
              onscroll="checkNewsScroll()"
            >
              <div
                id="news-loading"
                class="hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
              >
                <div class="dossier-card h-44 skeleton"></div>
                <div class="dossier-card h-44 skeleton"></div>
                <div class="dossier-card h-44 skeleton"></div>
              </div>
              <div id="articles-container"></div>
              <div id="news-load-more" class="hidden text-center py-4">
                <button
                  onclick="loadMoreNews()"
                  class="px-6 py-2 bg-blue-500/20 border border-blue-500/30 rounded text-blue-400 font-mono text-xs font-bold hover:bg-blue-500/30 transition-all"
                >
                  LOAD MORE
                </button>
              </div>
            </div>
          </div>

          <div id="tab-markets" class="tab-content">
            <div class="content-scroll-area">
              <div class="tab-ai-chat">
                <div class="tab-ai-chat-header">
                  <i class="fas fa-chart-line text-emerald-400 text-xs"></i>
                  <span
                    class="text-[9px] font-black text-emerald-400 uppercase tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >Markets AI · Ask Anything</span
                  >
                  <div class="flex-1"></div>
                  <div
                    class="w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"
                  ></div>
                </div>
                <div
                  class="flex items-center gap-2 bg-black/30 rounded-xl px-3 py-2"
                  style="border: 1px solid rgba(255, 255, 255, 0.06)"
                >
                  <input
                    type="text"
                    class="tab-ai-input"
                    id="ai-chat-input-markets"
                    placeholder="Analyze BTC trend, explain forex moves, gold outlook..."
                    onkeydown="if (event.key === 'Enter') sendTabAI('markets');"
                    autocomplete="off"
                  />
                  <button
                    class="tab-ai-send-btn"
                    onclick="sendTabAI('markets')"
                  >
                    ASK
                  </button>
                </div>
                <div
                  class="tab-ai-chat-response"
                  id="ai-chat-response-markets"
                ></div>
              </div>

              <div
                class="dossier-card mb-4"
                style="
                  background: rgba(0, 0, 0, 0.5);
                  border-color: rgba(255, 255, 255, 0.05);
                "
              >
                <div
                  class="flex justify-between items-center mb-3 border-b border-white/5 pb-3"
                >
                  <span
                    class="text-[10px] text-blue-400 uppercase font-black tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >LIVE EXCHANGE DATA</span
                  >
                  <div
                    class="w-2 h-2 bg-red-400 rounded-full animate-pulse"
                  ></div>
                </div>
                <div class="ticker-wrap pt-1">
                  <div class="ticker" id="stock-ticker-content"></div>
                </div>
              </div>

              <div class="dossier-card mb-4">
                <div
                  class="flex justify-between items-center mb-3 border-b border-white/5 pb-3 cursor-pointer"
                  onclick="toggleMarketCategory('metals')"
                >
                  <span
                    class="text-[10px] text-amber-400 uppercase font-black tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    <i class="fas fa-coins mr-2"></i>Precious Metals
                  </span>
                  <i
                    class="fas fa-chevron-down text-slate-500"
                    id="metals-chevron"
                  ></i>
                </div>
                <div
                  id="metals-content"
                  class="grid grid-cols-2 md:grid-cols-3 gap-3"
                ></div>
              </div>

              <div class="dossier-card mb-4">
                <div
                  class="flex justify-between items-center mb-3 border-b border-white/5 pb-3 cursor-pointer"
                  onclick="toggleMarketCategory('indices')"
                >
                  <span
                    class="text-[10px] text-blue-400 uppercase font-black tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    <i class="fas fa-chart-line mr-2"></i
                    ><span id="indices-country">Global</span> Indices
                  </span>
                  <i
                    class="fas fa-chevron-down text-slate-500"
                    id="indices-chevron"
                  ></i>
                </div>
                <div
                  id="indices-content"
                  class="grid grid-cols-1 md:grid-cols-2 gap-3 hidden"
                ></div>
              </div>

              <div class="dossier-card mb-4">
                <div
                  class="flex justify-between items-center mb-3 border-b border-white/5 pb-3 cursor-pointer"
                  onclick="toggleMarketCategory('crypto')"
                >
                  <span
                    class="text-[10px] text-emerald-400 uppercase font-black tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    <i class="fab fa-bitcoin mr-2"></i>Cryptocurrencies
                  </span>
                  <i
                    class="fas fa-chevron-down text-slate-500"
                    id="crypto-chevron"
                  ></i>
                </div>
                <div
                  id="crypto-content"
                  class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 hidden"
                ></div>
              </div>

              <div class="dossier-card mb-4">
                <div
                  class="flex justify-between items-center mb-3 border-b border-white/5 pb-3 cursor-pointer"
                  onclick="toggleMarketCategory('forex')"
                >
                  <span
                    class="text-[10px] text-cyan-400 uppercase font-black tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    <i class="fas fa-exchange-alt mr-2"></i>Forex Pairs
                  </span>
                  <i
                    class="fas fa-chevron-down text-slate-500"
                    id="forex-chevron"
                  ></i>
                </div>
                <div
                  id="forex-content"
                  class="grid grid-cols-1 md:grid-cols-2 gap-3 hidden"
                ></div>
              </div>

              <div class="dossier-card mb-4">
                <div
                  class="flex justify-between items-center mb-3 border-b border-white/5 pb-3 cursor-pointer"
                  onclick="toggleMarketCategory('commodities')"
                >
                  <span
                    class="text-[10px] text-yellow-400 uppercase font-black tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    <i class="fas fa-oil-can mr-2"></i>Commodities
                  </span>
                  <i
                    class="fas fa-chevron-down text-slate-500"
                    id="commodities-chevron"
                  ></i>
                </div>
                <div
                  id="commodities-content"
                  class="grid grid-cols-2 md:grid-cols-3 gap-3 hidden"
                ></div>
              </div>

              <div
                class="dossier-card mb-4"
                style="
                  background: rgba(245, 158, 11, 0.04);
                  border-color: rgba(245, 158, 11, 0.15);
                "
              >
                <div
                  class="flex justify-between items-center mb-3 border-b border-white/5 pb-3 cursor-pointer"
                  onclick="window.toggleMarketCategory('trending-crypto')"
                >
                  <span
                    class="text-[10px] text-amber-400 uppercase font-black tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    <i class="fas fa-fire-alt mr-2"></i>Trending · CoinGecko
                  </span>
                  <i
                    class="fas fa-chevron-down text-slate-500"
                    id="trending-crypto-chevron"
                  ></i>
                </div>
                <div
                  id="trending-crypto-content"
                  class="grid grid-cols-2 lg:grid-cols-4 gap-3 hidden"
                >
                  <div class="text-slate-500 text-xs py-2 animate-pulse">
                    Fetching trending coins...
                  </div>
                </div>
              </div>

              <div
                class="dossier-card mb-4"
                style="
                  background: rgba(99, 102, 241, 0.04);
                  border-color: rgba(99, 102, 241, 0.15);
                "
              >
                <div
                  class="flex justify-between items-center mb-3 border-b border-white/5 pb-3 cursor-pointer"
                  onclick="window.toggleMarketCategory('top10-crypto')"
                >
                  <span
                    class="text-[10px] text-indigo-400 uppercase font-black tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    <i class="fas fa-trophy mr-2"></i>Top 10 by Mkt Cap ·
                    CoinGecko
                  </span>
                  <i
                    class="fas fa-chevron-down text-slate-500"
                    id="top10-crypto-chevron"
                  ></i>
                </div>
                <div id="top10-crypto-content" class="space-y-0 hidden">
                  <div class="text-slate-500 text-xs py-2 animate-pulse">
                    Loading top 10...
                  </div>
                </div>
              </div>

              <div
                class="dossier-card mb-4"
                style="
                  background: rgba(6, 182, 212, 0.04);
                  border-color: rgba(6, 182, 212, 0.15);
                "
              >
                <div
                  class="flex justify-between items-center mb-3 border-b border-white/5 pb-3"
                >
                  <span
                    class="text-[10px] text-cyan-400 uppercase font-black tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    <i class="fas fa-university mr-2"></i>ECB Live EUR Rates
                  </span>
                  <span
                    class="text-[8px] text-slate-600 font-mono"
                    id="ecb-timestamp"
                    >ECB · Live</span
                  >
                </div>
                <div id="ecb-rates-content" class="space-y-0">
                  <div class="text-slate-500 text-xs animate-pulse">
                    Fetching ECB rates...
                  </div>
                </div>
              </div>

              <div
                class="dossier-card mb-4"
                style="
                  background: rgba(99, 102, 241, 0.04);
                  border-color: rgba(99, 102, 241, 0.15);
                "
              >
                <div
                  class="flex justify-between items-center mb-4 border-b border-white/5 pb-3"
                >
                  <span
                    class="text-[10px] text-indigo-400 uppercase font-black tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    <i class="fas fa-brain mr-2"></i>AI Market Analysis
                  </span>
                  <span
                    class="text-[9px] text-slate-500 font-bold uppercase"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >Live</span
                  >
                </div>
                <div
                  id="market-ai-analysis"
                  class="text-slate-300 leading-relaxed whitespace-pre-line"
                  style="
                    font-family: &quot;JetBrains Mono&quot;, monospace;
                    font-size: 12px;
                  "
                >
                  <span class="animate-pulse text-slate-500"
                    >Initializing financial uplink...</span
                  >
                </div>

                <div class="hidden">
                  <span id="price-gold"></span>
                  <span id="price-silver"></span>
                  <span id="market-brief-text"></span>
                </div>
              </div>
            </div>
          </div>

          <div id="tab-atmosphere" class="tab-content">
            <div class="content-scroll-area space-y-4">
              <div class="tab-ai-chat">
                <div class="tab-ai-chat-header">
                  <i class="fas fa-cloud-sun text-blue-300 text-xs"></i>
                  <span
                    class="text-[9px] font-black text-blue-300 uppercase tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >Weather AI · Ask Anything</span
                  >

                  <div class="flex-1"></div>
                  <span
                    id="atmo-location-label"
                    class="hidden text-[9px] font-bold text-slate-400 uppercase tracking-wider"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  ></span>
                  <div
                    class="w-1.5 h-1.5 rounded-full bg-blue-400 animate-pulse ml-2"
                  ></div>
                </div>
                <div
                  class="flex items-center gap-2 bg-black/30 rounded-xl px-3 py-2"
                  style="border: 1px solid rgba(255, 255, 255, 0.06)"
                >
                  <input
                    type="text"
                    class="tab-ai-input"
                    id="ai-chat-input-atmosphere"
                    placeholder="What does this weather mean? Best time to visit?"
                    onkeydown="
                      if (event.key === 'Enter') sendTabAI('atmosphere');
                    "
                    autocomplete="off"
                  />
                  <button
                    class="tab-ai-send-btn"
                    onclick="sendTabAI('atmosphere')"
                  >
                    ASK
                  </button>
                </div>
                <div
                  class="tab-ai-chat-response"
                  id="ai-chat-response-atmosphere"
                ></div>
              </div>

              <div class="dossier-card">
                <div class="flex justify-between items-center mb-3">
                  <span
                    class="text-[10px] text-cyan-400 uppercase font-black tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    <i class="fas fa-search-location mr-2"></i>Global Weather
                    Uplink
                  </span>
                </div>
                <div class="flex items-center gap-2">
                  <input
                    type="text"
                    id="atmo-city-search"
                    placeholder="Enter target city..."
                    class="w-full bg-black/30 border border-white/10 rounded-xl px-4 py-2 text-xs text-white placeholder-slate-600 focus:border-cyan-400 focus:outline-none transition-colors shadow-inner"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    onkeydown="
                      if (event.key === 'Enter') searchAtmosphereCity();
                    "
                    autocomplete="off"
                  />
                  <button
                    onclick="searchAtmosphereCity()"
                    class="px-5 py-2 text-[10px] bg-cyan-500/10 hover:bg-cyan-500/20 text-cyan-400 font-bold tracking-widest uppercase rounded-xl transition-all border border-cyan-500/20 shadow-sm"
                  >
                    SCAN
                  </button>
                </div>
              </div>

              <div
                class="dossier-card"
                style="
                  background: rgba(59, 130, 246, 0.05);
                  border-color: rgba(59, 130, 246, 0.2);
                "
              >
                <div
                  class="flex justify-between items-center mb-4 border-b border-white/5 pb-3"
                >
                  <span
                    class="text-[10px] text-blue-400 uppercase font-black tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    <i class="fas fa-brain mr-2"></i>AI Weather Analysis
                  </span>
                  <span
                    class="text-[9px] text-slate-500 font-bold uppercase"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >Neural Synthesis</span
                  >
                </div>
                <div
                  id="weather-ai-analysis"
                  class="text-slate-300 font-mono text-xs leading-relaxed"
                >
                  <span class="animate-pulse text-slate-500"
                    >Analyzing atmospheric conditions...</span
                  >
                </div>
              </div>

              <div id="weather-alerts" class="hidden space-y-2"></div>
              <div class="flex flex-col md:flex-row gap-4">
                <div
                  class="flex-1 dossier-card relative overflow-hidden group"
                  style="
                    background: linear-gradient(
                      135deg,
                      rgba(59, 130, 246, 0.06),
                      rgba(30, 41, 59, 0.1)
                    );
                    border-color: rgba(59, 130, 246, 0.15);
                  "
                >
                  <div
                    class="absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity"
                  >
                    <i
                      id="atmo-main-icon"
                      class="fas fa-cloud-sun text-8xl text-blue-400"
                    ></i>
                  </div>
                  <div
                    class="relative z-10 flex flex-col h-full justify-between"
                  >
                    <div>
                      <div class="flex items-center gap-2 mb-1">
                        <span
                          class="w-1.5 h-1.5 bg-emerald-400 rounded-full animate-pulse"
                        ></span>
                        <span
                          class="text-[9px] text-emerald-400 font-bold uppercase tracking-widest"
                          style="
                            font-family: &quot;JetBrains Mono&quot;, monospace;
                          "
                          >Live Telemetry</span
                        >
                      </div>
                      <div
                        id="atmo-temp"
                        class="font-black text-white leading-none tracking-tighter"
                        style="font-size: 72px"
                      >
                        -°
                      </div>
                      <div
                        id="atmo-condition"
                        class="text-lg text-blue-400 font-bold uppercase tracking-widest mt-1"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                      >
                        --
                      </div>
                    </div>
                    <div class="flex gap-6 mt-4 pt-4 border-t border-white/5">
                      <div>
                        <span
                          class="text-[9px] text-slate-500 font-bold uppercase tracking-widest block"
                          style="
                            font-family: &quot;JetBrains Mono&quot;, monospace;
                          "
                          >Feels Like</span
                        >
                        <span
                          id="atmo-feels"
                          class="text-base font-mono font-bold text-white"
                          >--°</span
                        >
                      </div>
                      <div>
                        <span
                          class="text-[9px] text-slate-500 font-bold uppercase tracking-widest block"
                          style="
                            font-family: &quot;JetBrains Mono&quot;, monospace;
                          "
                          >Low / High</span
                        >
                        <span
                          id="atmo-hl"
                          class="text-base font-mono font-bold text-white"
                          >-- / --</span
                        >
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  class="md:w-1/3 dossier-card flex flex-col justify-between"
                  style="
                    background: rgba(245, 158, 11, 0.04);
                    border-color: rgba(245, 158, 11, 0.15);
                  "
                >
                  <div class="flex justify-between items-center mb-3">
                    <span
                      class="text-[9px] text-amber-400 font-bold uppercase tracking-widest"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                      >Solar Cycle</span
                    >
                    <i class="fas fa-sun text-amber-400 text-base"></i>
                  </div>
                  <div class="relative h-20 w-full flex items-end px-2">
                    <div
                      class="absolute inset-x-0 bottom-0 h-px bg-white/8"
                    ></div>
                    <svg
                      class="absolute inset-0 w-full h-full"
                      preserveAspectRatio="none"
                    >
                      <path
                        d="M0,100 Q50,20 100,100"
                        fill="none"
                        stroke="rgba(245,158,11,.25)"
                        stroke-width="2"
                        vector-effect="non-scaling-stroke"
                      />
                      <circle
                        cx="50%"
                        cy="50%"
                        r="3"
                        class="fill-amber-400 animate-pulse"
                      />
                    </svg>
                    <div
                      class="w-full flex justify-between text-[9px] font-mono text-slate-400 pb-1 z-10"
                    >
                      <span id="atmo-sunrise">--:--</span>
                      <span id="atmo-sunset">--:--</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="dossier-card p-0 overflow-hidden">
                <div
                  class="px-4 py-2.5 border-b border-white/5"
                  style="background: rgba(255, 255, 255, 0.02)"
                >
                  <span
                    class="text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >24-Hour Projection</span
                  >
                </div>
                <div
                  id="atmo-hourly-container"
                  class="flex overflow-x-auto p-4 gap-5 no-scrollbar"
                ></div>
              </div>

              <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                <div
                  class="dossier-card flex flex-col items-center justify-center relative p-5"
                >
                  <span
                    class="absolute top-3 left-3 text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >Wind</span
                  >
                  <div
                    class="relative w-16 h-16 flex items-center justify-center my-1"
                  >
                    <div
                      class="absolute inset-0 border border-dashed border-white/10 rounded-full"
                    ></div>
                    <div
                      class="absolute top-0 text-[7px] text-slate-500 font-bold"
                    >
                      N
                    </div>
                    <div
                      class="absolute bottom-0 text-[7px] text-slate-500 font-bold"
                    >
                      S
                    </div>
                    <div
                      class="absolute right-0 text-[7px] text-slate-500 font-bold"
                    >
                      E
                    </div>
                    <div
                      class="absolute left-0 text-[7px] text-slate-500 font-bold"
                    >
                      W
                    </div>
                    <i
                      id="atmo-wind-arrow"
                      class="fas fa-long-arrow-alt-up text-2xl text-blue-400 transition-transform duration-1000"
                    ></i>
                  </div>
                  <div class="text-center">
                    <div
                      id="atmo-wind-speed"
                      class="text-xl font-black text-white"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >
                      --
                    </div>
                    <div
                      class="text-[8px] text-slate-500 uppercase"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >
                      KM/H
                    </div>
                  </div>
                </div>
                <div class="dossier-card flex flex-col p-5">
                  <span
                    class="text-[9px] text-slate-500 font-bold uppercase tracking-widest mb-3"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >UV Index</span
                  >
                  <div class="flex-1 flex flex-col justify-end">
                    <div
                      class="w-full bg-white/8 h-1 rounded-full overflow-hidden mb-2"
                    >
                      <div
                        id="atmo-uv-bar"
                        class="h-full w-0 transition-all duration-1000"
                        style="
                          background: linear-gradient(
                            90deg,
                            #22c55e,
                            #eab308,
                            #ef4444
                          );
                        "
                      ></div>
                    </div>
                    <div class="flex justify-between items-end">
                      <span
                        id="atmo-uv-val"
                        class="text-2xl font-black text-white leading-none"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                        >--</span
                      >
                      <span
                        id="atmo-uv-text"
                        class="text-[9px] text-slate-400 font-bold uppercase"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                        >--</span
                      >
                    </div>
                  </div>
                </div>
                <div class="dossier-card flex flex-col p-5">
                  <span
                    class="text-[9px] text-slate-500 font-bold uppercase tracking-widest mb-3"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >Humidity</span
                  >
                  <div class="flex items-center gap-3 h-full">
                    <i class="fas fa-tint text-xl text-blue-400 opacity-70"></i>
                    <div>
                      <div
                        id="atmo-humidity"
                        class="text-2xl font-black text-white leading-none"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                      >
                        --%
                      </div>
                      <div
                        class="text-[9px] text-slate-500 mt-1"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                      >
                        Dew Point:
                        <span id="atmo-dew" class="text-white">--°</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="dossier-card flex flex-col p-5">
                  <span
                    class="text-[9px] text-slate-500 font-bold uppercase tracking-widest mb-3"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >Visibility</span
                  >
                  <div class="flex-1 flex flex-col justify-center gap-1">
                    <div
                      class="h-0.5 w-full rounded-full"
                      style="background: rgba(59, 130, 246, 0.2)"
                    ></div>
                    <div
                      class="h-0.5 w-3/4 rounded-full"
                      style="background: rgba(59, 130, 246, 0.35)"
                    ></div>
                    <div
                      class="h-0.5 w-1/2 rounded-full"
                      style="background: rgba(59, 130, 246, 0.55)"
                    ></div>
                  </div>
                  <div class="mt-2 text-right">
                    <span
                      id="atmo-visibility"
                      class="text-2xl font-black text-white"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                      >--</span
                    >
                    <span
                      class="text-[9px] text-slate-500 ml-1"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                      >KM</span
                    >
                  </div>
                </div>
                <div class="dossier-card flex flex-col p-5">
                  <span
                    class="text-[9px] text-slate-500 font-bold uppercase tracking-widest mb-2"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >Pressure</span
                  >
                  <div class="flex items-end justify-between mt-auto">
                    <div>
                      <div
                        id="atmo-pressure"
                        class="text-2xl font-black text-white leading-none"
                      >
                        --
                      </div>
                      <div
                        class="text-[8px] text-slate-500 mt-1"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                      >
                        HPA
                      </div>
                    </div>
                    <i class="fas fa-tachometer-alt text-xl text-slate-600"></i>
                  </div>
                </div>
                <div
                  class="dossier-card flex flex-col p-5"
                  style="
                    background: rgba(99, 102, 241, 0.03);
                    border-color: rgba(99, 102, 241, 0.15);
                  "
                >
                  <span
                    class="text-[9px] text-indigo-400 font-bold uppercase tracking-widest mb-2"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >Lunar Phase</span
                  >
                  <div class="mt-auto flex items-center gap-3">
                    <i
                      id="atmo-moon-icon"
                      class="fas fa-moon text-xl text-indigo-300"
                    ></i>
                    <span
                      id="atmo-moon-text"
                      class="text-[10px] font-bold text-white uppercase leading-tight"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                      >--</span
                    >
                  </div>
                </div>
                <div class="dossier-card flex flex-col p-5">
                  <span
                    class="text-[9px] text-slate-400 font-bold uppercase tracking-widest mb-2"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >Cloud Ceiling</span
                  >
                  <div class="mt-auto flex items-end justify-between">
                    <div>
                      <div
                        id="atmo-cloud-base"
                        class="text-2xl font-black text-white leading-none"
                      >
                        --
                      </div>
                      <div
                        class="text-[8px] text-slate-500 mt-1"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                      >
                        KM
                      </div>
                    </div>
                    <i
                      class="fas fa-cloud-upload-alt text-xl text-slate-500"
                    ></i>
                  </div>
                </div>
                <div
                  class="dossier-card flex flex-col p-5"
                  style="
                    background: rgba(59, 130, 246, 0.04);
                    border-color: rgba(59, 130, 246, 0.12);
                  "
                >
                  <span
                    class="text-[9px] text-blue-400 font-bold uppercase tracking-widest mb-2"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >24h Precip</span
                  >
                  <div class="mt-auto flex items-end justify-between">
                    <div>
                      <div
                        id="atmo-precip-total"
                        class="text-2xl font-black text-white leading-none"
                      >
                        --
                      </div>
                      <div
                        class="text-[8px] text-slate-500 mt-1"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                      >
                        MM
                      </div>
                    </div>
                    <i
                      class="fas fa-cloud-showers-heavy text-xl text-blue-400 opacity-70"
                    ></i>
                  </div>
                </div>
              </div>

              <div class="dossier-card p-0 overflow-hidden">
                <div
                  class="px-5 py-3 border-b border-white/5 flex justify-between items-center"
                  style="background: rgba(255, 255, 255, 0.02)"
                >
                  <span
                    class="text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >7-Day Tactical Outlook</span
                  >
                  <i class="fas fa-calendar-alt text-slate-600 text-sm"></i>
                </div>
                <div
                  id="atmo-daily-container"
                  class="divide-y divide-white/5"
                ></div>
              </div>
            </div>
          </div>

          <div id="tab-economic" class="tab-content">
            <div class="content-scroll-area space-y-4">
              <div class="tab-ai-chat">
                <div class="tab-ai-chat-header">
                  <i class="fas fa-coins text-amber-400 text-xs"></i>
                  <span
                    class="text-[9px] font-black text-amber-400 uppercase tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >Economic AI · Ask Anything</span
                  >
                  <div class="flex-1"></div>
                  <div
                    class="w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"
                  ></div>
                </div>
                <div
                  class="flex items-center gap-2 bg-black/30 rounded-xl px-3 py-2"
                  style="border: 1px solid rgba(255, 255, 255, 0.06)"
                >
                  <input
                    type="text"
                    class="tab-ai-input"
                    id="ai-chat-input-economic"
                    placeholder="Explain GDP trends, inflation impact, trade balance..."
                    onkeydown="
                      if (event.key === 'Enter') sendTabAI('economic');
                    "
                    autocomplete="off"
                  />
                  <button
                    class="tab-ai-send-btn"
                    onclick="sendTabAI('economic')"
                  >
                    ASK
                  </button>
                </div>
                <div
                  class="tab-ai-chat-response"
                  id="ai-chat-response-economic"
                ></div>
              </div>

              <div class="flex flex-col md:flex-row gap-4">
                <div
                  class="flex-1 dossier-card relative overflow-hidden"
                  style="
                    background: rgba(16, 185, 129, 0.04);
                    border-color: rgba(16, 185, 129, 0.15);
                  "
                >
                  <div
                    class="absolute -right-4 -top-4 text-9xl"
                    style="color: rgba(16, 185, 129, 0.06)"
                  >
                    <i class="fas fa-coins"></i>
                  </div>
                  <div class="relative z-10">
                    <span
                      class="text-[9px] text-emerald-400 font-bold uppercase tracking-widest flex items-center gap-2"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                    >
                      <span
                        class="w-1.5 h-1.5 bg-emerald-400 rounded-full animate-pulse"
                      ></span
                      >Gross Domestic Product
                    </span>
                    <div class="mt-2 flex items-baseline gap-2">
                      <span class="text-sm text-slate-400 font-bold">$</span>
                      <span
                        id="eco-gdp"
                        class="text-5xl font-black text-white tracking-tighter"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                        >--</span
                      >
                      <span class="text-sm text-slate-400 font-bold">BN</span>
                    </div>
                    <div class="mt-4 pt-4 border-t border-white/5 flex gap-8">
                      <div>
                        <span
                          class="block text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                          style="
                            font-family: &quot;JetBrains Mono&quot;, monospace;
                          "
                          >Growth Rate</span
                        >
                        <span
                          id="eco-growth"
                          class="text-lg font-mono font-bold text-emerald-400"
                          >--%</span
                        >
                      </div>
                      <div>
                        <span
                          class="block text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                          style="
                            font-family: &quot;JetBrains Mono&quot;, monospace;
                          "
                          >Per Capita</span
                        >
                        <span
                          id="eco-capita"
                          class="text-lg font-mono font-bold text-white"
                          >$--</span
                        >
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  class="md:w-1/3 dossier-card flex flex-col justify-between relative overflow-hidden"
                >
                  <div
                    class="absolute inset-0 skew-y-12 transform origin-bottom-left scale-150"
                    style="background: rgba(59, 130, 246, 0.04)"
                  ></div>
                  <div class="relative z-10 flex justify-between items-start">
                    <div>
                      <span
                        class="text-[9px] text-blue-400 font-bold uppercase tracking-widest"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                        >Forex Uplink</span
                      >
                      <div
                        id="eco-currency-code"
                        class="text-3xl font-black text-white mt-1"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                      >
                        USD
                      </div>
                    </div>
                    <i
                      class="fas fa-exchange-alt text-xl text-blue-400 opacity-40"
                    ></i>
                  </div>
                  <div class="relative z-10 mt-auto">
                    <span
                      class="text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                      >1.00 USD =</span
                    >
                    <div
                      id="eco-rate"
                      class="text-4xl font-mono font-bold text-white tracking-tighter"
                    >
                      --
                    </div>
                    <div
                      class="w-full bg-white/8 h-0.5 mt-2 rounded-full overflow-hidden"
                    >
                      <div
                        class="h-full w-1/2 animate-pulse"
                        style="background: var(--blue)"
                      ></div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                <div class="dossier-card p-4">
                  <div class="flex justify-between items-start mb-2">
                    <span
                      class="text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                      >Inflation (CPI)</span
                    >
                    <i class="fas fa-percentage text-slate-600 text-sm"></i>
                  </div>
                  <div
                    id="eco-inflation"
                    class="text-2xl font-black text-white"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    --%
                  </div>
                  <div
                    class="text-[9px] text-slate-500 mt-1"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    YoY Change
                  </div>
                </div>
                <div class="dossier-card p-4">
                  <div class="flex justify-between items-start mb-2">
                    <span
                      class="text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                      >Unemployment</span
                    >
                    <i class="fas fa-user-tie text-slate-600 text-sm"></i>
                  </div>
                  <div
                    id="eco-unemployment"
                    class="text-2xl font-black text-white"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    --%
                  </div>
                  <div
                    class="text-[9px] text-slate-500 mt-1"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    Labor Force
                  </div>
                </div>
                <div class="dossier-card p-4">
                  <div class="flex justify-between items-start mb-2">
                    <span
                      class="text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                      >Central Bank Rate</span
                    >
                    <i class="fas fa-university text-slate-600 text-sm"></i>
                  </div>
                  <div
                    id="eco-interest"
                    class="text-2xl font-black text-white"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    --%
                  </div>
                  <div
                    class="text-[9px] text-slate-500 mt-1"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    Monetary Policy
                  </div>
                </div>
                <div class="dossier-card p-4">
                  <div class="flex justify-between items-start mb-2">
                    <span
                      class="text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                      >Govt Debt</span
                    >
                    <i class="fas fa-balance-scale text-slate-600 text-sm"></i>
                  </div>
                  <div
                    id="eco-debt"
                    class="text-2xl font-black text-white"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    --%
                  </div>
                  <div
                    class="text-[9px] text-slate-500 mt-1"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    of GDP
                  </div>
                </div>

                <div class="dossier-card p-4">
                  <div class="flex justify-between items-start mb-2">
                    <span
                      class="text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                      >Trade Balance</span
                    >
                    <i class="fas fa-balance-scale text-slate-600 text-sm"></i>
                  </div>
                  <div
                    id="eco-trade-balance"
                    class="text-2xl font-black text-white"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    --
                  </div>
                  <div
                    class="text-[9px] text-slate-500 mt-1"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    Billion USD
                  </div>
                </div>
                <div class="dossier-card p-4">
                  <div class="flex justify-between items-start mb-2">
                    <span
                      class="text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                      >FDI</span
                    >
                    <i class="fas fa-globe text-slate-600 text-sm"></i>
                  </div>
                  <div
                    id="eco-fdi"
                    class="text-2xl font-black text-white"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    --
                  </div>
                  <div
                    class="text-[9px] text-slate-500 mt-1"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    Billion USD
                  </div>
                </div>
                <div class="dossier-card p-4">
                  <div class="flex justify-between items-start mb-2">
                    <span
                      class="text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                      >Reserves</span
                    >
                    <i class="fas fa-piggy-bank text-slate-600 text-sm"></i>
                  </div>
                  <div
                    id="eco-reserves"
                    class="text-2xl font-black text-white"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    --
                  </div>
                  <div
                    class="text-[9px] text-slate-500 mt-1"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    Billion USD
                  </div>
                </div>
                <div class="dossier-card p-4">
                  <div class="flex justify-between items-start mb-2">
                    <span
                      class="text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                      >Credit Rating</span
                    >
                    <i class="fas fa-star text-slate-600 text-sm"></i>
                  </div>
                  <div
                    id="eco-credit-rating"
                    class="text-xl font-black text-white"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    --
                  </div>
                  <div
                    class="text-[9px] text-slate-500 mt-1"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    S&amp;P / Moody's
                  </div>
                </div>
              </div>

              <div class="dossier-card p-0">
                <div
                  class="px-4 py-3 border-b border-white/5"
                  style="background: rgba(255, 255, 255, 0.02)"
                >
                  <span
                    class="text-[10px] text-blue-400 font-bold uppercase tracking-widest"
                    style="font-family: &quot;JetBrains Mono&quot;, monospace"
                  >
                    <i class="fas fa-chart-area mr-2"></i>5-Year GDP Trend
                  </span>
                </div>
                <div class="p-4">
                  <canvas id="gdp-trend-chart" height="150"></canvas>
                </div>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="dossier-card p-0">
                  <div
                    class="px-4 py-2.5 border-b border-white/5 flex justify-between items-center"
                    style="background: rgba(255, 255, 255, 0.02)"
                  >
                    <span
                      class="text-[9px] text-blue-400 font-bold uppercase tracking-widest"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                      >Major Exports</span
                    >
                    <i class="fas fa-ship text-slate-600 text-sm"></i>
                  </div>
                  <div id="eco-exports" class="p-4 space-y-2">
                    <div
                      class="h-3 rounded w-3/4 animate-pulse"
                      style="background: rgba(255, 255, 255, 0.08)"
                    ></div>
                    <div
                      class="h-3 rounded w-1/2 animate-pulse"
                      style="background: rgba(255, 255, 255, 0.08)"
                    ></div>
                  </div>
                </div>
                <div class="dossier-card p-0">
                  <div
                    class="px-4 py-2.5 border-b border-white/5 flex justify-between items-center"
                    style="background: rgba(255, 255, 255, 0.02)"
                  >
                    <span
                      class="text-[9px] text-slate-500 font-bold uppercase tracking-widest"
                      style="font-family: &quot;JetBrains Mono&quot;, monospace"
                      >Sovereign Data</span
                    >
                    <i class="fas fa-globe text-slate-600 text-sm"></i>
                  </div>
                  <div class="p-4 grid grid-cols-2 gap-y-3 gap-x-2">
                    <div>
                      <span
                        class="text-[8px] text-slate-500 uppercase font-bold block"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                        >Population</span
                      ><span
                        id="fact-pop-2"
                        class="text-sm font-mono font-bold text-white"
                        >--</span
                      >
                    </div>
                    <div>
                      <span
                        class="text-[8px] text-slate-500 uppercase font-bold block"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                        >Gini Index</span
                      ><span
                        id="fact-gini-2"
                        class="text-sm font-mono font-bold text-white"
                        >--</span
                      >
                    </div>
                    <div>
                      <span
                        class="text-[8px] text-slate-500 uppercase font-bold block"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                        >Demonym</span
                      ><span
                        id="fact-demonym-2"
                        class="text-sm font-mono font-bold text-white"
                        >--</span
                      >
                    </div>
                    <div>
                      <span
                        class="text-[8px] text-slate-500 uppercase font-bold block"
                        style="
                          font-family: &quot;JetBrains Mono&quot;, monospace;
                        "
                        >Area</span
                      ><span
                        id="fact-area-2"
                        class="text-sm font-mono font-bold text-white"
                        >--</span
                      >
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="dossier-card p-3"
                style="
                  background: rgba(0, 0, 0, 0.5);
                  border-color: rgba(255, 255, 255, 0.06);
                "
              >
                <span
                  class="text-blue-400 font-bold mr-2"
                  style="
                    font-family: &quot;JetBrains Mono&quot;, monospace;
                    font-size: 11px;
                  "
                  >>> MARKET_FEED:</span
                >
                <span
                  id="eco-market-ticker"
                  class="text-slate-300 typing-cursor"
                  style="
                    font-family: &quot;JetBrains Mono&quot;, monospace;
                    font-size: 11px;
                  "
                  >Initializing Global Financial Uplink...</span
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer
      class="h-11 border-t overflow-hidden flex items-center flex-shrink-0"
      style="
        background: rgba(2, 6, 23, 0.98);
        border-color: rgba(59, 130, 246, 0.1);
      "
    >
      <div class="animate-marquee whitespace-nowrap flex-1 text-center">
        <span
          class="text-[10px] font-black text-blue-400 uppercase tracking-[.3em] mx-16"
          style="font-family: &quot;JetBrains Mono&quot;, monospace"
          >SYSTEM: MAP ENGINE CALIBRATED v9.7</span
        >
        <span
          class="text-[10px] font-black text-slate-500 uppercase tracking-[.3em] mx-16"
          style="font-family: &quot;JetBrains Mono&quot;, monospace"
          >STACK: NODE.JS | EXPRESS | FIREBASE | VERCEL EDGE</span
        >
        <span
          class="text-[10px] font-black text-blue-400 uppercase tracking-[.3em] mx-16"
          style="font-family: &quot;JetBrains Mono&quot;, monospace"
          >UI: TAILWIND CSS | VANILLA JS | D3.JS | WEBAUDIO</span
        >
        <span
          class="text-[10px] font-black text-slate-500 uppercase tracking-[.3em] mx-16"
          style="font-family: &quot;JetBrains Mono&quot;, monospace"
          >DATA: APINEWSDATA | COINGECKO | YAHOO FINANCE | USGS</span
        >
        <span
          class="text-[10px] font-black text-blue-400 uppercase tracking-[.3em] mx-16"
          style="font-family: &quot;JetBrains Mono&quot;, monospace"
          >AI INTELLIGENCE CORE: GROQ LLAMA 3 ORCHESTRATION</span
        >
      </div>
    </footer>

    <div id="fact-pop" class="hidden"></div>
    <div id="fact-currency" class="hidden"></div>
    <div id="fact-cap" class="hidden"></div>
    <div id="fact-region" class="hidden"></div>
    <div id="fact-area" class="hidden"></div>
    <div id="fact-code" class="hidden"></div>
    <div id="fact-demonym" class="hidden"></div>
    <div id="fact-gini" class="hidden"></div>
    <div id="fact-drive" class="hidden"></div>

    <div id="shortcuts-overlay" class="shortcuts-overlay">
      <div
        class="flex justify-between items-center mb-4 pb-3 border-b border-white/10"
      >
        <h3 class="text-blue-400 font-black uppercase tracking-wider text-sm">
          Keyboard Shortcuts
        </h3>
        <button
          onclick="toggleShortcuts()"
          class="text-slate-500 hover:text-white transition-colors"
        >
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="space-y-2">
        <div class="shortcut-item">
          <span class="text-slate-400">Search Countries</span>
          <span class="shortcut-key">/</span>
        </div>
        <div class="shortcut-item">
          <span class="text-slate-400">About Terminal</span>
          <span class="shortcut-key">?</span>
        </div>
        <div class="shortcut-item">
          <span class="text-slate-400">India Home</span>
          <span class="shortcut-key">Ctrl + I</span>
        </div>
        <div class="shortcut-item">
          <span class="text-slate-400">Toggle Projection</span>
          <span class="shortcut-key">P</span>
        </div>
        <div class="shortcut-item">
          <span class="text-slate-400">Reset View</span>
          <span class="shortcut-key">R</span>
        </div>
        <div class="shortcut-item">
          <span class="text-slate-400">Escape / Close</span>
          <span class="shortcut-key">Esc</span>
        </div>
      </div>
    </div>

    <script src="js/core/audio.js"></script>
    <script src="js/modules/map-engine.js"></script>
    <script src="js/modules/geography.js"></script>
    <script src="js/modules/markets.js"></script>
    <script src="js/modules/economics.js"></script>
    <script src="js/modules/news.js"></script>
    <script src="js/modules/weather.js"></script>
    <script src="js/ui/search.js"></script>
    <script src="js/ui/about.js"></script>

    <script type="module" src="js/core/firebase.js"></script>
    <script type="module" src="js/app.js"></script>

    <script>
      window.sendTabAI = async function (tabId) {
        const input = document.getElementById(`ai-chat-input-${tabId}`);
        const responseEl = document.getElementById(`ai-chat-response-${tabId}`);
        if (!input || !responseEl) return;
        const query = input.value.trim();
        if (!query) return;
        input.disabled = true;

        // Build context-aware system prompt
        const country = window.selectedCountry?.properties?.name || "Global";
        const contextMap = {
          intel: `You are a military intelligence analyst. The user is viewing intel on ${country}. Answer concisely in under 120 words with a tactical, authoritative tone.`,
          news: `You are a senior news analyst. The user is reading news about ${country}. Summarize or explain in under 120 words.`,
          markets: `You are a financial market analyst. The user is viewing market data. Answer the query in under 120 words with data-driven insight.`,
          atmosphere: `You are a meteorologist. The user is viewing weather data for ${window._currentWeatherLocation || country}. Answer in under 120 words.`,
          economic: `You are a macroeconomist. The user is viewing economic data for ${country}. Answer the query in under 120 words with key metrics.`,
        };
        const systemContext =
          contextMap[tabId] ||
          `Answer the question about ${country} in under 120 words.`;

        responseEl.classList.add("open");
        responseEl.innerHTML = `<div class="tab-ai-thinking"><span></span><span></span><span></span> <span style="color:#94a3b8;font-size:10px;margin-left:4px">Analyzing...</span></div>`;

        try {
          const res = await fetch("/api/ai", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              prompt: `${systemContext}\n\nUser question: ${query}`,
            }),
          });
          const result = await res.json();
          let text =
            result.candidates?.[0]?.content?.parts?.[0]?.text ||
            result.response ||
            result.text ||
            "No response received.";
          text = text.replace(/\*\*/g, "").trim();
          responseEl.innerHTML = `<span style="color:#60a5fa;font-size:9px;letter-spacing:.1em;font-weight:900;text-transform:uppercase">AI ›</span> ${text}`;
          input.value = "";
          if (window.playTacticalSound) window.playTacticalSound("success");
        } catch (e) {
          responseEl.innerHTML = `<span style="color:#ef4444">Connection failed. Retry.</span>`;
        } finally {
          input.disabled = false;
          input.focus();
        }
      };
    </script>

    <script>
      window.toggleShortcuts = () => {
        const overlay = document.getElementById("shortcuts-overlay");
        overlay.classList.toggle("active");
      };

      window.addEventListener("keydown", (e) => {
        if (e.target.tagName === "INPUT" || e.target.tagName === "TEXTAREA")
          return;

        switch (e.key) {
          case "/":
            e.preventDefault();
            toggleSearch();
            break;
          case "?":
            e.preventDefault();
            toggleShortcuts();
            break;
          case "p":
          case "P":
            e.preventDefault();
            if (window.toggleProjection) toggleProjection();
            break;
          case "r":
          case "R":
            e.preventDefault();
            if (window.resetToGlobalCenter) resetToGlobalCenter();
            break;
          case "i":
          case "I":
            if (e.ctrlKey || e.metaKey) {
              e.preventDefault();
              if (window.goToIndiaHome) goToIndiaHome();
            }
            break;
          case "Escape":
            const activeOverlay = document.querySelector(
              ".shortcuts-overlay.active",
            );
            if (activeOverlay) {
              activeOverlay.classList.remove("active");
            }
            break;
        }
      });

      setTimeout(() => {
        if (!localStorage.getItem("shortcuts-seen")) {
          const hint = document.createElement("div");
          hint.style.cssText = `
          position: fixed;
          bottom: 2rem;
          right: 2rem;
          background: rgba(59, 130, 246, 0.9);
          backdrop-filter: blur(10px);
          padding: 1rem 1.5rem;
          border-radius: 12px;
          font-family: 'JetBrains Mono', monospace;
          font-size: 11px;
          color: white;
          z-index: 9999;
          animation: fadeIn 0.5s ease;
          cursor: pointer;
        `;
          hint.innerHTML = "Press <strong>?</strong> for keyboard shortcuts";
          hint.onclick = () => {
            hint.remove();
            toggleShortcuts();
            localStorage.setItem("shortcuts-seen", "true");
          };
          document.body.appendChild(hint);

          setTimeout(() => {
            hint.style.transition = "opacity 0.5s ease";
            hint.style.opacity = "0";
            setTimeout(() => hint.remove(), 500);
          }, 5000);
        }
      }, 3000);
    </script>
  </body>
</html>
